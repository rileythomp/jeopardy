<div *ngIf='user'  id='profile-container' class='flex-row'>
    <div id='profile-side-panel' class='flex-column profile-panel'>
        <div>
            <img [src]="user.imgUrl" alt="">
            <p class='link' (click)='showImgUpload = !showImgUpload'>Change profile picture</p>
            <div *ngIf='showImgUpload'>
                <input #userImg (change)='changeProfilePicture($event)' type="file" accept=".jpg, .jpeg, .png">
            </div>
        </div>
        <div *ngIf='!editName' class='profile-username'>
            <p style='font-size: 2em;'>{{ user.name }}</p>
            <div><ion-icon (click)='showEditName(true)' name='pencil-outline'></ion-icon></div>
        </div>
        <div *ngIf='editName' class='profile-username'>
            <input type='text' [(ngModel)]='editedUserName'>
            <div><ion-icon (click)='showEditName(false)' name='close-outline'></ion-icon></div>
            <div><ion-icon (click)='updateUserName()' name='checkmark-outline'></ion-icon></div>
        </div>
        <div><p>{{ user.email }}</p></div>
        <div><p>Date joined: {{ user.dateJoined }}</p></div>
        <div>
            <p class='link' (click)='showPasswordReset = !showPasswordReset'>Reset password</p>
            <div *ngIf='showPasswordReset'>
                <button (click)='sendPasswordResetEmail()'>
                    <div class='icon-text'>
                        <div><ion-icon name="paper-plane-outline"></ion-icon></div>
                        <p>Send password reset email</p>
                    </div>
                </button>
            </div>
        </div>
    </div>
    <div id='profile-main-panel' class='profile-panel flex-column'>
        <div *ngIf='playSomeGames'>
            <p>No player analytics found. Play some games to start generating analytics.</p>
        </div>
        <div *ngIf='analytics'>
            <div>
                <h4>Record</h4>
                <p>{{ analytics.wins }}-{{ analytics.games - analytics.wins }} ({{ analytics.winPercentage }}%)</p>
            </div>
            <div>
                <h4>All-time Totals</h4>
                <p>Points: ${{ analytics.points }}</p>
                <p>Correct answers: {{ analytics.correct }}/{{ analytics.answers }} ({{ analytics.correctPercentage }}%)</p>    
            </div>
            <div>
                <h4>All-time Highs</h4>
                <p>Points: ${{analytics.maxPoints }}</p>
                <p>Correct answers: {{ analytics.maxCorrect }}</p>
            </div>
        </div>
    </div>
</div>
